<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Colors</title>

    <link rel="Shortcut Icon" href="favicon.ico">

    <!-- jquery -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>

    <!-- bootstrap v5.0 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">

    <!-- custom styles -->
    <link rel="stylesheet" href="style.css">

    <!-- colorpicker -->
    <script src="https://cdn.jsdelivr.net/npm/@jaames/iro@5"></script>
</head>
<body style="background: #111111;">
    <img src="img/2.png" alt="colors" style="display:none;">

    <div class="color-background custom"></div>
    <div class="color-background transition"></div>

    <div class="container h-100">
        <div class="row h-100 justify-content-center align-items-center">

            <div class="card">
                <h1 class="title">Choose your favourite color</h1>
                <div id="picker"></div>
                <div class="colors">
                    <ball data-set="0" style="background: #fff;"><span></span></ball>
                    <ball data-set="1" style="background: #f00;"><span></span></ball>
                    <ball data-set="2" style="background: #0f0;"><span></span></ball>
                    <ball data-set="3" style="background: #00f;"><span></span></ball>
                    <ball onclick="getColor();" style="background: #ffffff;">
                        <i class="bi bi-arrow-right-short"></i>
                    </ball>
                </div>

                <script type="text/javascript">

                    $("ball span").hide();
                    $(".color-background.transition").hide();

                    var current = 0;
                    var title_pre = "Choose your favourite ";
                    var title_color = ["color", "red", "green", "blue"];
                    var title_submit = "Make changes or Submit now";

                    var icons = ["bi-arrow-right-short", "bi-check"];

                    function setCurrent(n) {

                        current = parseInt(n);

                        if (n >= 4) {
                            $("h1.title").html(title_submit);
                            $("ball .bi").removeClass(icons[0]);
                            $("ball .bi").addClass(icons[1]);
                            return;
                        }

                        $("ball .bi").removeClass(icons[1]);
                        $("ball .bi").addClass(icons[0]);

                        $("h1.title").html(title_pre + title_color[n]);
                        colorPicker.color.hexString = $("input[type=color]")[current].value;
                    }

                    function getColor() {

                        if (current >= 4) {
                            $("input[type=submit]").click();
                        }

                        hex = colorPicker.color.hexString;

                        $("input[type=color]")[current].value = hex;

                        colorTransition($("ball span").eq(current), $("ball").eq(current), hex);

                        if (current == 0) {
                            colorTransition($(".color-background.transition"), $(".color-background.custom"), hex, 5000);
                        }

                        setCurrent(current + 1);
                    }

                    $("ball").click(function() {
                        set = $(this).attr("data-set");
                        if (set == null) return;
                        setCurrent($(this).attr("data-set"));
                    });

                    var colorPicker = new iro.ColorPicker('#picker', {
                      // Set the size of the color picker
                      width: 280,
                      // Set the initial color to pure red
                      color: "#fff"
                    });

                    function colorTransition(transitionLayer, backgroundLayer, colorHex, speed = 400) {

                        transitionLayer.css("background", hex);
                        transitionLayer.fadeIn(speed, function() {
                            backgroundLayer.css("background", hex);
                            $(this).fadeOut(speed);
                        });
                    }
                </script>
            </div>

        </div>
    </div>

    <form class="colors" action="result.php" method="post" style="display: none;">
        <input type="color" name="color" value="#ffffff">

        <p>Choose your favourite RED</p>
        <input type="color" name="red" value="#ff0000">

        <p>Choose your favourite GREEN</p>
        <input type="color" name="green" value="#00ff00">

        <p>Choose your favourite BLUE</p>
        <input type="color" name="blue" value="#0000ff">

        <hr>

        <input type="submit" name="" value="Submit">
    </form>

</body>

</html>
